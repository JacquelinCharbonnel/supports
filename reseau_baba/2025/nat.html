<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>NAT :: Supports</title>
    <link rel="canonical" href="https://jacquelincharbonnel.github.io/supports/reseau_baba/2025/nat.html">
    <meta name="generator" content="Antora 3.1.14">
    <link rel="stylesheet" href="../../_/css/site.css">
<!-- reference des feuilles de styles suppl√©mentaires -->
<link rel="stylesheet" href="../../_/css/layout.css">
<link rel="stylesheet" href="../../_/css/content.css">

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://jacquelincharbonnel.github.io/supports">Supports</a>
  <!-- suppression du burger du bandeau
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
-->      
    </div>
<!-- suppression des boutons du bandeau
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
      </div>
    </div>
-->
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="reseau_baba" data-version="2025">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="index.html">R√©seau</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Aper√ßu</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Services d&#8217;infrastructure</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="arp.html">ARP</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="nat.html">NAT</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dns.html">DNS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dhcp.html">DHCP</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">R√©seau</span>
    <span class="version">2025</span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../../C/2023/index.html">C</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../C/2023/index.html">2023</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../concurrence/2024/index.html">Concurrence</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../concurrence/2024/index.html">2024</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../datatext/2023/index.html">DataText</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../datatext/2023/index.html">2023</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../json/2023/index.html">JSON</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../json/2023/index.html">2023</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../linux/2025/index.html">Linux</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../linux/2025/index.html">2025</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../python_objet/2024/index.html">Python objet</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../python_objet/2024/index.html">2024</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <div class="title"><a href="index.html">R√©seau</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">2025</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../supports/index.html">Supports</a></div>
    </li>
    <li class="component">
      <div class="title"><a href="../../xml/2023/index.html">XML</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../xml/2023/index.html">2023</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../supports/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">R√©seau</a></li>
    <li>Services d&#8217;infrastructure</li>
    <li><a href="nat.html">NAT</a></li>
  </ul>
</nav>
<!-- supression de "edit this page"
  <div class="edit-this-page"><a href="file:///home/jaclin/antora_components/reseaubaba/./modules/ROOT/pages/nat.adoc">Edit this Page</a></div>
-->
</div>
  <!-- ajout de la date de modification -->
     <div class="lastmodify"> derni√®re modification : 2025 </div>
  <!-- fin ajout -->
  <div class="content">
<aside class="toc sidebar" data-title="Plan" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">NAT</h1>
<div class="sect1">
<h2 id="_p√©nurie_dadresses_ipv4"><a class="anchor" href="#_p√©nurie_dadresses_ipv4"></a>1. P√©nurie d&#8217;adresses IPv4</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Le nombre d&#8217;adresses IPv4 est 256<sup>4</sup>, soit 4,3 milliards d&#8217;adresses IPv4.
C&#8217;est tr√®s insuffisant pour √©quiper tous les appareils connect√©s.
IPv6 a √©t√© cr√©√© pour faire face √† la p√©nurie, mais sa mise en oeuvre est lente.
Le NAT est un moyen pour IPv4 de faire face au probl√®me, en attendant l&#8217;av√®nement d&#8217;IPv6 qui r√©soudra la p√©nurie.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_classe_dadresses_ip"><a class="anchor" href="#_classe_dadresses_ip"></a>2. Classe d&#8217;adresses IP</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Une adresse IP repr√©sente √† la fois un r√©seau et un √©quipement sur ce r√©seau.
Et de fait, l&#8217;adresse IP est compos√©e d&#8217;une adresse r√©seau et d&#8217;une adresse d&#8217;√©quipement (dans cet ordre).</p>
</div>
<div class="paragraph">
<p>La fronti√®re adresse_r√©seau/adresse_√©quipement est mobile.
Elle est d√©termin√©e avec une donn√©e suppl√©mentaire repr√©sentant le nombre de bits de l&#8217;adresse r√©seau.
Exemples :</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>11.1.2.3/8</code></dt>
<dd>
<p>Le <code>/8</code> signifie que l&#8217;adresse r√©seau est cod√©e par les 8 premiers bits.
Donc cette adresse IP identifie l&#8217;√©quipement <code>1.2.3</code> sur le r√©seau <code>11</code>
(IP de classe A).</p>
</dd>
<dt class="hdlist1"><code>173.19.1.2/16</code></dt>
<dd>
<p>Le <code>/16</code> signifie que l&#8217;adresse r√©seau est cod√©e par les 16 premiers bits.
Donc cette adresse IP identifie l&#8217;√©quipement <code>1.2</code> sur le r√©seau <code>173.19</code>
(IP de classe B).</p>
</dd>
<dt class="hdlist1"><code>193.19.45.1/24</code></dt>
<dd>
<p>Le <code>/24</code> signifie que l&#8217;adresse r√©seau est cod√©e par les 24 premiers bits.
Donc cette adresse IP identifie l&#8217;√©quipement <code>1</code> sur le r√©seau <code>193.19.45</code>
(IP de classe C).</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_r√©seaux_ip_priv√©s"><a class="anchor" href="#_r√©seaux_ip_priv√©s"></a>3. R√©seaux IP priv√©s</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Certains r√©seaux, par convention, ne sont pas rout√©s sur Internet.
Ces r√©seaux (appell√©s <em>r√©seaux priv√©s</em>) sont :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>le r√©seau <code>10.x.x.x/8</code> comportant 256<sup>3</sup> IP,</p>
</li>
<li>
<p>les 16 r√©seaux compris entre <code>172.16.x.x/16</code> et <code>172.31.x.x/16</code>, de 256¬≤ IP chacun, et</p>
</li>
<li>
<p>les 256 r√©seaux <code>192.168.x.x/24</code>, de 256 IP chacun.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tous les routeurs d&#8217;Internet √©cartent ces r√©seaux de leurs tables de routage.
Par cons√©quent, ces r√©seaux sont injoignables,
simplement parce qu&#8217;aucun routeur n&#8217;indique comment les atteindre.</p>
</div>
<div class="paragraph">
<p>N&#8217;importe qui peut donc utiliser ces r√©seaux pour un usage personnel,
sans risque de conflit.
Dans les faits, ces r√©seaux priv√©s
sont utilis√©s pour des LAN priv√©s, dont les √©quipements n&#8217;ont pas besoin d&#8217;√™tre accessibles sur Internet.
Par exemple, le r√©seau d&#8217;un particulier chez lui est un r√©seau priv√©.
Et de fait, les √©quipements num√©riques d&#8217;un particulier ne sont pas joignables depuis Internet (ce qui est tr√®s s√©curisant pour lui).</p>
</div>
<div class="paragraph">
<p>Mais alors, comment un √©quipement d&#8217;un r√©seau priv√© peut-il communiquer avec un √©quipement sur Internet ?
Comment l&#8217;√©quipement peut-il recevoir les r√©ponses √† ses r√©qu√™tes ?
R√©ponse : gr√¢ce au NAT.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_nat"><a class="anchor" href="#_nat"></a>4. NAT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Le NAT (<em>Network Address Translation</em>)
est une <em>astuce</em> qui permet √† une adresse IP priv√©e, avec la complicit√© de sa passerelle, de communiquer sur Internet.</p>
</div>
<div class="paragraph">
<p>Lorsqu‚Äôun √©quipement d‚Äôun r√©seau priv√© veut communiquer avec un ordinateur sur Internet :</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>L‚Äô√©quipement envoie un paquet sur son LAN.
Comme tout paquet IP, celui-ci contient l&#8217;adresse IP de la source (n√©cessaire pour recevoir une r√©ponse).
Donc ici, l&#8217;adresse source est l&#8217;adresse IP priv√©e de l&#8217;√©metteur du paquet.</p>
</li>
<li>
<p>Comme la destination n&#8217;est pas sur le LAN, le paquet est r√©cup√©r√© par la passerelle.</p>
</li>
<li>
<p>La passerelle proc√®de alors √† un subterfuge :
elle remplace, dans le paquet, l‚Äôadresse source par sa propre adresse, son adresse publique
(elle m√©morise aussi des informations qui seront utiles au retour du paquet).
Le paquet a donc maintenant une addresse source publique,
et c&#8217;est ainsi qu&#8217;il d√©barque sur Internet.</p>
</li>
<li>
<p>La destination re√ßoit le paquet, le traite et pr√©pare la r√©ponse.
Ce nouveau paquet part en direction de l&#8217;adresse IP source contenue dans le paquet re√ßu (qui est devenue l&#8217;adresse de destination dans ce nouveau paquet).
Le paquet part donc √† destination de la passerelle du LAN de la source.</p>
</li>
<li>
<p>La passerelle re√ßoit la r√©ponse,
d√©termine, √† l&#8217;aide des informations m√©moris√©es √† l&#8217;aller, l&#8217;√©quipement auquel
elle doit √™tre remise,
et lui transmet.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/NAT_Concept.png" alt="nat" width="640"></span></p>
</div>
<div class="paragraph">
<p>Le NAT permet donc, vu d&#8217;Internet, d&#8217;avoir plusieurs √©quipements derri√®re  une seule et m√™me IP.
C&#8217;est un moyen de faire face √† la p√©nurie d&#8217;adresses IP.</p>
</div>
<div class="paragraph">
<p>Un r√©seau priv√© derri√®re un NAT est inaccessible directement depuis Internet, ce qui est un avantage √©norme d&#8217;un point de vue s√©curit√©.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_redirection_de_ports"><a class="anchor" href="#_redirection_de_ports"></a>5. Redirection de ports</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La redirection de port (<em>port forwarding</em>) permet √†
un √©quipement situ√© sur un r√©seau priv√© d&#8217;√™tre contact√© par des √©quipements situ√©s sur Internet.
Cela permet par exemple d&#8217;avoir un serveur web chez soi, ouvert sur Internet.
Cela permet aussi de pouvoir, depuis Internet,
d&#8217;acc√©der √† la camera de surveillance de sa maison,
√† son NAS, √† son r√©frig√©rateur, etc.</p>
</div>
<div class="paragraph">
<p>Le port forwarding se param√®tre sur la passerelle.
Il faut la configurer de telle sorte qu&#8217;elle redirige le trafic r√©seau arrivant sur un port donn√© vers un appareil sp√©cifique sur le LAN
(elle doit avant tout r√©aliser un NAT pour ce r√©seau).</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/portforward.png" alt="portforward" width="640"></span></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Installer un serveur web chez soi</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>installer un serveur web sur un ordinateur du r√©seau domestique, donc avec une IP priv√©e, par exemple 192.168.1.10 (un serveur web standard qui √©coute par exemple sur le port 8080)</p>
</li>
<li>
<p>configurer la passerelle (munie d&#8217;une IP publique, par exemple 11.1.1.2) de telle sorte qu&#8217;elle redirige ce qui lui arrive sur un port donn√©, par exemple 80, sur le port 8080 de 192.168.1.10.</p>
</li>
<li>
<p>tester en envoyant une requ√™te depuis Internet sur <a href="http://11.1.1.2" class="bare">http://11.1.1.2</a>.
Celle-ci doit arriver sur le port 8080 de 192.168.1.10.</p>
</li>
</ol>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>En ouvrant √† tout vent un r√©seau initialement ferm√©, le port forwarding a un impact majeur sur la s√©curit√© du r√©seau local.
L&#8217;√©quipement auparavant inaccessible, devient d&#8217;un coup visible par tout Internet.
D√©sormais, il ne peut compter que sur ses propres d√©fense pour assurer sa s√©curit√©.
Il doit donc appliquer les bonnes pratiques de s√©curit√© :
logiciels √† jour, patches de s√©curit√© appliqu√©s, mots de passe solides, etc.
Et une surveillance attentive de ce qui s&#8217;y passe doit √™tre effectu√©e.
A la moindre faille, l&#8217;√©quipement sera au mieux congestionn√© (le meilleur des cas), ou pire, infiltr√© ou corrompu.
Puis (le loup √©tant dans la bergerie) cette machine infiltr√©e servira de rebond pour acc√©der et pirater les autres √©quipements du r√©seau local priv√©. üò±</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p class="center">
  <span style="font-size: 0.9em;">
    <a href="https://jacquelincharbonnel.github.io/">Jacquelin Charbonnel</a>
    <!-- &nbsp; &mdash; &nbsp; -->
    &nbsp;
    &copy;Creative Commons BY-NC-SA 4.0
  </span>
  </p>
</footer>

<script>
var myDate = new Date(document.lastModified);
myNewDate = new Intl.DateTimeFormat(
            undefined,
            {year: "numeric", month: "long", day: "numeric", hour: "2-digit", minute: "2-digit"}
        )
        .format(myDate).replace(/\./g, '-');
document.getElementById("lastmodify").innerHTML = myNewDate ;
</script>

<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
