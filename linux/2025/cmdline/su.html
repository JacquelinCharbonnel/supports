<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Privilèges :: Supports</title>
    <link rel="canonical" href="https://jacquelincharbonnel.github.io/supports/linux/2025/cmdline/su.html">
    <meta name="generator" content="Antora 3.1.14">
    <link rel="stylesheet" href="../../../_/css/site.css">
<!-- reference des feuilles de styles supplémentaires -->
<link rel="stylesheet" href="../../../_/css/layout.css">
<link rel="stylesheet" href="../../../_/css/content.css">

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://jacquelincharbonnel.github.io/supports">Supports</a>
  <!-- suppression du burger du bandeau
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
-->      
    </div>
<!-- suppression des boutons du bandeau
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
      </div>
    </div>
-->
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="linux" data-version="2025">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">Linux</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../context/overview.html">Le contexte</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../context/news.html">L&#8217;actualité</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="priseenmain.html">Utiliser le système</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="fs.html">Système de fichiers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="shell.html">Le shell</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="proc.html">Processus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="redirect.html">Redirection et pipes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="remote.html">Connexions distantes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="script.html">Script shell</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cron.html">Planifier les tâches</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="admin.html">Gérer le système</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="su.html">Privilèges</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="appli.html">Les applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="admfs.html">L&#8217;espace de stockage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="user.html">Les comptes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="services.html">Les services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="nfs.html">NFS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="sshd.html">sshd</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Linux</span>
    <span class="version">2025</span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../../../C/2023/index.html">C</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../C/2023/index.html">2023</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../concurrence/2024/index.html">Concurrence</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../concurrence/2024/index.html">2024</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../datatext/2023/index.html">DataText</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../datatext/2023/index.html">2023</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../json/2023/index.html">JSON</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../json/2023/index.html">2023</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <div class="title"><a href="../index.html">Linux</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">2025</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../python_objet/2024/index.html">Python objet</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../python_objet/2024/index.html">2024</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../reseau_baba/2025/index.html">Réseau</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../reseau_baba/2025/index.html">2025</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../supports/index.html">Supports</a></div>
    </li>
    <li class="component">
      <div class="title"><a href="../../../xml/2023/index.html">XML</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../xml/2023/index.html">2023</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../supports/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Linux</a></li>
    <li><a href="admin.html">Gérer le système</a></li>
    <li><a href="su.html">Privilèges</a></li>
  </ul>
</nav>
<!-- supression de "edit this page"
  <div class="edit-this-page"><a href="file:///home/jaclin/antora_components/linux/./modules/cmdline/pages/su.adoc">Edit this Page</a></div>
-->
</div>
  <!-- ajout de la date de modification -->
     <div class="lastmodify"> dernière modification : 2025 </div>
  <!-- fin ajout -->
  <div class="content">
<aside class="toc sidebar" data-title="Plan" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Privilèges</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Sous Unix, le super-utilisateur s&#8217;appelle <code>root</code>.
Son uid est 0, et son groupe principal est <code>root</code> (de gid 0).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_su"><a class="anchor" href="#_su"></a>1. <code>su</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>La commande <code>su</code> permet de changer d&#8217;identité, donc en particulier de prendre l&#8217;identité de <code>root</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ whoami
jaclin

$ su              # changement d'identité : jaclin va devenir root
Mot de passe :   # jaclin doit donner ici le mot de passe de root

# whoami
root

# id
uid=0(root) gid=0(root) groupes=0(root)

# ^D   # retour à l'identité première

$ whoami
jaclin</pre>
</div>
</div>
<div class="paragraph">
<p><code>su</code> permet donc à un utilisateur connaissant le mot de passe <code>root</code> d&#8217;acquérir les privilèges du super-utilisateur.
En réalité, <code>su</code> permet d&#8217;endosser l&#8217;identité de n&#8217;importe qui (cf <code>man su</code>).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sudo"><a class="anchor" href="#_sudo"></a>2. <code>sudo</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>S&#8217;il y est autorisé, un utilisateur peut exécuter une commande particulière <em>en tant que root</em> via la commande <code>sudo</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ whoami
jaclin

$ sudo whoami
root

$ id
uid=1000(jaclin) gid=1000(jaclin) groupes=1000(jaclin),10(wheel)

$ sudo id
uid=0(root) gid=0(root) groupes=0(root)</code></pre>
</div>
</div>
<div class="paragraph">
<p>En réalité, à l&#8217;instar de <code>su</code>, <code>sudo</code> permet d&#8217;endosser l’identité de n’importe qui.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>su</code> est une commande historique, <code>sudo</code> ne l&#8217;est pas (elle est apparue dans les années 1980).
Elle est néanmoins omniprésente sur Linux.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_su_vs_sudo"><a class="anchor" href="#_su_vs_sudo"></a>3. <code>su</code> vs <code>sudo</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>sudo</code> offre plus de possibilités que <code>su</code>,
en permettant un réglage fin des privilèges accordés aux utilisateurs.
Son paramètrage est défini dans le fichier <code>/etc/sudoers</code> et expliqué via <code>man sudoers</code>.</p>
</div>
<div class="paragraph">
<p>Lorsque <code>sudo</code> demande un mot de passe, l&#8217;utilisateur doit donner son propre mot de passe
(la connaissance du mot de passe root n&#8217;est donc pas nécessaire pour devenir root via <code>sudo</code>).
Alors que lorsque <code>su</code> demande un mot de passe, l&#8217;utilisateur doit donner le mot de passe du compte cible
(il faut donc connaitre le mot de passe root pour devenir root via <code>su</code>).</p>
</div>
<div class="paragraph">
<p>Cette différence est importante :
<code>sudo</code> permet d&#8217;autoriser un utilisateur à exécuter toutes ou certaines commandes en tant que <code>root</code> sans qu&#8217;il connaisse le mot de passe de root.
C&#8217;est judicieux lorsque le système est géré par une équipe tournante d&#8217;administrateurs système, car cela évite de changer le mot de passe root à chaque départ de l&#8217;un d&#8217;entre eux.
Mais en contre-partie, si un utilisateur habilité par <code>sudo</code> se fait pirater son compte, alors l&#8217;intru pourra lui aussi exécuter des commandes en tant que <code>root</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 44.4444%;">
<col style="width: 44.4445%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"></th>
<th class="tableblock halign-left valign-top">avantages</th>
<th class="tableblock halign-left valign-top">inconvénients</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>su</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">la compromission du compte personnel d&#8217;un administrateur ne donne pas accès au compte root</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tous les administrateurs connaissent le mot de passe de root</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>sudo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">le passe de root peut rester secret, il n&#8217;est pas nécessaire aux administrateurs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">si on usurpe l&#8217;identité d&#8217;un administrateur, alors rien n&#8217;empêche l&#8217;usurpateur de devenir root</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>sudo -i</code> permet de lancer un shell en tant que <code>root</code>
(comme le fait <code>su</code>).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exemples_de_tâches_dadministration"><a class="anchor" href="#_exemples_de_tâches_dadministration"></a>4. Exemples de tâches d&#8217;administration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_sur_le_système_de_fichiers"><a class="anchor" href="#_sur_le_système_de_fichiers"></a>4.1. Sur le système de fichiers</h3>
<div class="paragraph">
<p>Chaque entrée du système de fichiers possède un propriétaire, qui est le compte qui l&#8217;a créé.
Mais <code>root</code>, et lui seul, peut le modifier avec la commande <code>chown</code> (<em>change owner</em>) :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ whoami
jaclin

$ touch /tmp/un_fichier  # création d'un fichier vide

$ ll /tmp/un_fichier
-rw-r--r--  1 jaclin jaclin 0 20 nov.  20:31 /tmp/un_fichier

$ chown root /tmp/un_fichier
chown: modification du propriétaire de '/tmp/un_fichier': Opération non permise

$ sudo chown root /tmp/un_fichier

$ ll /tmp/un_fichier
-rw-r--r--  1 root jaclin 0 20 nov.  20:31 /tmp/un_fichier</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_les_logs"><a class="anchor" href="#_les_logs"></a>4.2. Les logs</h3>
<div class="paragraph">
<p>Surveiller l&#8217;activité du système est une tâche essentielle de l&#8217;administrateur.
Cela lui permet de traquer des anomalies de fonctionnement
et donc d&#8217;anticiper les problèmes (partition pleine, agonie d&#8217;un disque, etc.).</p>
</div>
<div class="paragraph">
<p>Les logs (<em>journaux</em>) consignent les évènements qui se produisent sur le système.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Unix <em>traditionnel</em></dt>
<dd>
<p>Historiquement, les logs d&#8217;Unix sont pris en charge par le service <code>syslog</code>,
qui produit des journaux (de simples fichiers texte) dans le répertoire <code>/var/log</code>.
On les consulte comme on consulte un fichier texte :</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ tail -f /var/log/messages</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">Linux avec <code>systemd</code></dt>
<dd>
<p>Pour les distributions ayant adopté <code>systemd</code>, les logs sont gérés par <code>journald</code>, un module de <code>systemd</code>.
On parcourt alors les logs avec la commande <code>journalctl</code> :</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">## consulter chronologiquement le journal
$ sudo journalctl

## consulter anti-chronologiquement le journal
$ sudo journalctl -r

## suivre l'évolution du journal
$ sudo journalctl -f</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1">Résumé</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>su</code> et <code>sudo</code> permettent à un compte d&#8217;acquérir les super privilèges</p>
</li>
<li>
<p><code>journalctl</code> visualise les journaux du système (si <code>systemd</code> est opérant)</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p class="center">
  <span style="font-size: 0.9em;">
    <a href="https://jacquelincharbonnel.github.io/">Jacquelin Charbonnel</a>
    <!-- &nbsp; &mdash; &nbsp; -->
    &nbsp;
    &copy;Creative Commons BY-NC-SA 4.0
  </span>
  </p>
</footer>

<script>
var myDate = new Date(document.lastModified);
myNewDate = new Intl.DateTimeFormat(
            undefined,
            {year: "numeric", month: "long", day: "numeric", hour: "2-digit", minute: "2-digit"}
        )
        .format(myDate).replace(/\./g, '-');
document.getElementById("lastmodify").innerHTML = myNewDate ;
</script>

<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
