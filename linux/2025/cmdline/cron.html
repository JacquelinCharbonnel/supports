<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Planifier les tâches :: Supports</title>
    <link rel="canonical" href="https://jacquelincharbonnel.github.io/supports/linux/2025/cmdline/cron.html">
    <meta name="generator" content="Antora 3.1.14">
    <link rel="stylesheet" href="../../../_/css/site.css">
<!-- reference des feuilles de styles supplémentaires -->
<link rel="stylesheet" href="../../../_/css/layout.css">
<link rel="stylesheet" href="../../../_/css/content.css">

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://jacquelincharbonnel.github.io/supports">Supports</a>
  <!-- suppression du burger du bandeau
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
-->      
    </div>
<!-- suppression des boutons du bandeau
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
      </div>
    </div>
-->
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="linux" data-version="2025">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">Linux</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../context/overview.html">Le contexte</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../context/news.html">L&#8217;actualité</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="priseenmain.html">Utiliser le système</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="fs.html">Système de fichiers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="shell.html">Le shell</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="proc.html">Processus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="redirect.html">Redirection et pipes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="remote.html">Connexions distantes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="script.html">Script shell</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="cron.html">Planifier les tâches</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="admin.html">Gérer le système</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="su.html">Privilèges</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="appli.html">Les applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="admfs.html">L&#8217;espace de stockage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="user.html">Les comptes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="services.html">Les services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="nfs.html">NFS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="sshd.html">sshd</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Linux</span>
    <span class="version">2025</span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../../../C/2023/index.html">C</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../C/2023/index.html">2023</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../concurrence/2024/index.html">Concurrence</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../concurrence/2024/index.html">2024</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../datatext/2023/index.html">DataText</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../datatext/2023/index.html">2023</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../json/2023/index.html">JSON</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../json/2023/index.html">2023</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <div class="title"><a href="../index.html">Linux</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">2025</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../python_objet/2024/index.html">Python objet</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../python_objet/2024/index.html">2024</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../reseau_baba/2025/index.html">Réseau</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../reseau_baba/2025/index.html">2025</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../supports/index.html">Supports</a></div>
    </li>
    <li class="component">
      <div class="title"><a href="../../../xml/2023/index.html">XML</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../xml/2023/index.html">2023</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../supports/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Linux</a></li>
    <li><a href="priseenmain.html">Utiliser le système</a></li>
    <li><a href="cron.html">Planifier les tâches</a></li>
  </ul>
</nav>
<!-- supression de "edit this page"
  <div class="edit-this-page"><a href="file:///home/jaclin/antora_components/linux/./modules/cmdline/pages/cron.adoc">Edit this Page</a></div>
-->
</div>
  <!-- ajout de la date de modification -->
     <div class="lastmodify"> dernière modification : 2025 </div>
  <!-- fin ajout -->
  <div class="content">
<aside class="toc sidebar" data-title="Plan" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Planifier les tâches</h1>
<div class="sect1">
<h2 id="_cron"><a class="anchor" href="#_cron"></a>1. <code>cron</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cron</code> est le système de planication de tâches historique d&#8217;Unix.
Il permet d&#8217;automatiser l&#8217;exécution périodique de commandes, comme par exemple des sauvegardes, des mises à jour, l&#8217;envoi de rapports, etc.</p>
</div>
<div class="paragraph">
<p><code>cron</code> est un daemon (c&#8217;est-à-dire un processus qui tourne en permanence) qui applique les règles définies dans des fichiers de description des planications. On appelle ces fichiers les <em>crontab</em>.</p>
</div>
<div class="sect2">
<h3 id="_format_dune_crontab"><a class="anchor" href="#_format_dune_crontab"></a>1.1. Format d&#8217;une crontab</h3>
<div class="paragraph">
<p>La crontab est un tableau qui définit quand  les tâches doivent se déclencher.
Chaque ligne de la crontab représente une planification et suit la syntaxe  :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">* * * * * appel de la commande à exécuter</pre>
</div>
</div>
<div class="paragraph">
<p>Les cinq premiers champs (représentés ci-dessus par des étoiles) définissent des contraintes sur le compteur des
 minutes (0-59), heures (0-23), jours du mois (1-31), mois (1-12) et jours de la semaine (1-7).
La fin de la ligne exprime la commande à exécuter (avec éventuellement ses arguments).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">.---------------- minute (0-59)
|  .------------- heure (0-23)
|  |  .---------- jour du mois (1-31)
|  |  |  .------- mois (1-12) ou jan,feb,mar,apr ...
|  |  |  |  .---- jour de la semaine (0-7) (dimanche=0 ou 7) ou sun,mon,tue,wed,thu,fri,sat
|  |  |  |  |
*  *  *  *  * user-name  command to be executed</code></pre>
</div>
</div>
<div class="paragraph">
<p>Par exemple :</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">9 * * * *</pre>
</div>
</div>
<div class="paragraph">
<p>signifie que le déclenchement ne peut avoir lieu que si le compteur des minutes à l&#8217;instant t est à 9
(les étoiles signifient que le champ correspondant n&#8217;est pas discriminant).
Donc au final, les déclenchements auront lieu à 1h 9min, 2h 9min, 3h 9min, etc.</p>
</div>
<div class="paragraph">
<p>Chaque nouvelle valeur ajoute une contrainte supplémentaire.
Par exemple,</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">9 3 * * *</pre>
</div>
</div>
<div class="paragraph">
<p>exprime un déclenchement à 3h 9min (tous les jours).
Plus on ajoute de valeur, plus on réduit la fréquence.
Par exemple,</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">9 3 1 * *</pre>
</div>
</div>
<div class="paragraph">
<p>exprime un déclenchement à 3h 9min tous les premiers de chaque mois.</p>
</div>
<div class="paragraph">
<p>Lorsque le moment est venu
(c&#8217;est-à-dire lorsque les champs <em>minute</em>, <em>heure</em>, etc. correspondent à la date actuelle),
la commande se déclenche.</p>
</div>
<div class="paragraph">
<p>Les champs peuvent également définir des plages temporelles, sous les formes suivantes :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Plages de valeurs :</strong> <code>1-5</code> (de 1 à 5), <code>lun-ven</code> (du lundi au vendredi)</p>
</li>
<li>
<p><strong>Listes de valeurs :</strong> <code>1,3,5</code> (soit les valeurs 1, 3 et 5)</p>
</li>
<li>
<p><strong>Incréments :</strong> <code>*/10</code> (toutes les multipes de 10)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Exemple :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">*/10 * * * * ...</pre>
</div>
</div>
<div class="paragraph">
<p>pour une exécution toutes les 10 minutes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">30 */6 * * * ...</pre>
</div>
</div>
<div class="paragraph">
<p>pour une exécution toutes les six heures, à la demie.</p>
</div>
</div>
<div class="sect2">
<h3 id="_gérer_une_crontab"><a class="anchor" href="#_gérer_une_crontab"></a>1.2. Gérer une crontab</h3>
<div class="paragraph">
<p>Chaque utilisateur possède sa crontab.
Une crontab particulière est également dédiée aux tâches d&#8217;administration système.
Une crontab s&#8217;édite avec la commande :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ crontab -e</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela ouvre un éditeur de texte où l&#8217;on peut ajouter, modifier ou supprimer des tâches planifiées.</p>
</div>
<div class="paragraph">
<p>Pour lister les tâches planifiées :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ crontab -l</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>utiliser des chemins absolus dans l&#8217;expression des tâches</p>
</li>
<li>
<p>le fichier <code>.bashrc</code> n&#8217;est pas lu avant une exécution de tâche.</p>
</li>
<li>
<p>la valeur de la variable PATH possède une liste minimale de chemins</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_anacron"><a class="anchor" href="#_anacron"></a>2. <code>anacron</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cron</code> est bien adapté aux ordinateurs fonctionnant 24h/24, comme les serveurs.
Mais sur un poste de travail hors tension une partie du temps, rien ne garantit que les tâches vont s&#8217;exécuter.
Par exemple, une tâche planifiée pour minuit toutes les nuits ne sera jamais exécutée si l&#8217;ordinateur est éteint toutes les nuits.
Dans ce cas, mieux vaut utiliser <code>anacron</code>, qui est fait pour ça.</p>
</div>
<div class="paragraph">
<p>Pour chaque tâche,
anacron vérifie qu&#8217;elle a été exécutée au cours des n derniers jours,
où n correspond à la périodicité de cette tâche,
et l&#8217;exécute si ce n&#8217;est pas le cas.</p>
</div>
<h3 id="_anacrontab" class="discrete"><code>anacrontab</code></h3>
<div class="paragraph">
<p>L&#8217;anacrontab est un tableau qui définit les fréquences auxquelles les tâches doivent se déclencher.
Chaque ligne de la crontab représente une planification et suit la syntaxe  :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">périodicité   délai   identifiant_de_tâche   commande</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>périodicité</code> indique la fréquence d&#8217;exécution d&#8217;une tâche en jours, ou bien
<code>@daily</code>,
<code>@weekly</code>  ou
<code>@monthly</code></p>
</li>
<li>
<p><code>délai</code> indique le nombre de minutes qu&#8217;attend anacron avant d&#8217;exécuter la tâche.</p>
</li>
<li>
<p><code>identifiant_de_tâche</code> identifie la tâche.</p>
</li>
<li>
<p>la fin de la ligne exprime la commande à exécuter (avec éventuellement ses arguments).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_planification_avec_systemd"><a class="anchor" href="#_planification_avec_systemd"></a>3. Planification avec <code>systemd</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>systemd</code> permet de planifier des tâches, de façon très différente de <code>cron</code> et <code>anacron</code>.
Les <em>timers</em> qu&#8217;il propose peuvent se substituer à <code>cron</code> et <code>anacron</code>, en offrant même plus de possibilités.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p class="center">
  <span style="font-size: 0.9em;">
    <a href="https://jacquelincharbonnel.github.io/">Jacquelin Charbonnel</a>
    <!-- &nbsp; &mdash; &nbsp; -->
    &nbsp;
    &copy;Creative Commons BY-NC-SA 4.0
  </span>
  </p>
</footer>

<script>
var myDate = new Date(document.lastModified);
myNewDate = new Intl.DateTimeFormat(
            undefined,
            {year: "numeric", month: "long", day: "numeric", hour: "2-digit", minute: "2-digit"}
        )
        .format(myDate).replace(/\./g, '-');
document.getElementById("lastmodify").innerHTML = myNewDate ;
</script>

<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
