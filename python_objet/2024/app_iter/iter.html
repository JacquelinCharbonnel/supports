<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Itérable :: Supports</title>
    <link rel="canonical" href="https://jacquelincharbonnel.github.io/supports/python_objet/2024/app_iter/iter.html">
    <meta name="generator" content="Antora 3.1.14">
    <link rel="stylesheet" href="../../../_/css/site.css">
<!-- reference des feuilles de styles supplémentaires -->
<link rel="stylesheet" href="../../../_/css/layout.css">
<link rel="stylesheet" href="../../../_/css/content.css">

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://jacquelincharbonnel.github.io/supports">Supports</a>
  <!-- suppression du burger du bandeau
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
-->      
    </div>
<!-- suppression des boutons du bandeau
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
      </div>
    </div>
-->
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="python_objet" data-version="2024">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">Python objet</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../poo/poo.html">Concepts de la POO</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../objet/objet.html">Objet</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../objet/Tortue/Tortue.html">Exercice 1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../objet/Frigo/Frigo.html">Exercice 2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../objet/IPaddr/IPaddr.html">Exercice 3</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../objet/TicTacToe/tictactoe.html">Problème 1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../objet/Torche/torche.html">Problème 2</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../operateurs/operateurs.html">Opérateurs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operateurs/domino/domino.html">Problème</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../classe/classe.html">Membres de classe</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../classe/capteurs/capteurs.html">Problème</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../heritage/heritage.html">Héritage</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../heritage/Biodiversite/biodiversite.html">Problème 1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../heritage/Formes/formes.html">Problème 2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../heritage/debrief.html">Debriefing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../heritage/flotte/flotte.html">Problème 3</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../heritage/Biblio/biblio.html">Problème 4</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../exception/exception.html">Exceptions</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../exception/Poker/poker.html">Problème</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../internals/internals.html">Debriefing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../internals/muabilite.html">Muabilité</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../internals/hashable.html">Hashable</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Applications</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="iter.html">Itérable</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../app_files/files.html">Lecture/écriture de données</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../app_contextman/context.html">Context manager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../app_serialisation/serialisation.html">Sérialisation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../app_callable/callable.html">Callables</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../packaging/packaging.html">Packaging</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../eval/biblio.html">Projet</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../heritage/BiblioScrap/BiblioScrap.html">Projet</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Python objet</span>
    <span class="version">2024</span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../../../C/2023/index.html">C (preview)</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../C/2023/index.html">2023</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../concurrence/2024/index.html">Concurrence (preview)</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../concurrence/2024/index.html">2024</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../linux_context/2025/index.html">Linux contexte (preview)</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../linux_context/2025/index.html">2025</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <div class="title"><a href="../index.html">Python objet</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">2024</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Python objet</a></li>
    <li>Applications</li>
    <li><a href="iter.html">Itérable</a></li>
  </ul>
</nav>
<!-- supression de "edit this page"
  <div class="edit-this-page"><a href="file:///home/jaclin/antora_components/python_objet/./modules/app_iter/pages/iter.adoc">Edit this Page</a></div>
-->
</div>
  <!-- ajout de la date de modification -->
  <div class="lastmodify"> modifié le <span id="lastmodify"/> </div>
  <!-- fin ajout -->
  <div class="content">
<aside class="toc sidebar" data-title="Plan" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Itérable</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Un <em>itérable</em> est un objet capable d’énumérer ses éléments.
Par définition, si on peut écrire :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">for e in x:
  ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>alors <code>x</code> est un itérable.
Les séquences (tuple, liste, string, etc.) et les dictionnaires sont des itérables.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_indiçable"><a class="anchor" href="#_indiçable"></a>1. Indiçable</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Par définition, <code>x</code> est <em>indiçable</em> (<em>subscriptable</em>) si l&#8217;expression <code>x[i]</code> a un sens.</p>
</div>
<div class="paragraph">
<p>Pour un objet <code>x</code>, récupérer la valeur de <code>x[i]</code>, c&#8217;est récupérer ce que renvoie <code>x.__getitem__(i)</code>.
Donc un indiçable est un objet possédant une méthode <code>__getitem__(self,i)</code>.
La méthode n&#8217;impose aucune contrainte en ce qui concerne le type et les valeurs de son paramètre <code>i</code>.</p>
</div>
<div class="paragraph">
<p>De même, modifier la valeur de <code>x[i]</code> se fait via la méthode <code>__setitem__()</code>, car :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">x[i] = 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>est interprété comme :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">x.__setitem__(i,1)</code></pre>
</div>
</div>
<h3 id="_itérer_sur_un_indiçable" class="discrete">Itérer sur un indiçable</h3>
<div class="paragraph">
<p>Si <code>x</code> est indiçable, alors :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">for e in x:
  ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>est interprété comme :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">i=0
try:
  while True:
    e = x[i]
    ...
    i += 1
except IndexError:
  pass</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le <code>for</code> n&#8217;est donc rien d&#8217;autre qu&#8217;un <code>while</code> infini duquel on sort par une exception.
Mais pour que cela fonctionne sur un indiçable, il faut que celui-ci :</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>accepte au minimum des indices entiers positifs ou nuls</p>
</li>
<li>
<p>lance une exception <code>IndexError</code> pour arrêter l&#8217;itération</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Exemple d&#8217;indiçable :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">class Indicable():
    def __getitem__(self,i):
        if i&gt;10: raise IndexError("index hors des limites")
        return i*i</code></pre>
</div>
</div>
<div class="paragraph">
<p>ce qui peut s&#8217;utiliser comme :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">mon_indicable = Indicable()

for k in mon_indicable:
    print(k,end=" ")</code></pre>
</div>
</div>
<div class="paragraph">
<p>pour donner :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>0 1 4 9 16 25 36 49 64 81 100</pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;exception n&#8217;est pas perceptible par le développeur.
En effet, elle est attrapée et gérée par la boucle <code>for</code>.
Par conséquent, elle s&#8217;évapore après traitement, et l&#8217;exécution du programme se poursuit normalement.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_itérable_séquentiel"><a class="anchor" href="#_itérable_séquentiel"></a>2. Itérable séquentiel</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Il n&#8217;est pas obligatoire d&#8217;être indiçable pour être itérable.
Par exemple, le type <code>set</code> est itérable, mais pas indiçable :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">s = { 1,3,5,7,9, 1,3,5,7,9 }
for i in s:
  print(i,end=" ") # 1 3 5 7 9
print(s[1]) # TypeError: 'set' object is not subscriptable</code></pre>
</div>
</div>
<div class="paragraph">
<p>On accède séquentiellement aux éléments de l&#8217;itérable,
sans pouvoir accéder directement à l&#8217;un d&#8217;eux en particulier.</p>
</div>
<div class="paragraph">
<p>Pour un objet non indiçable :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">for e in x:
  ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>est interprété comme :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">for e in iter(x):
  ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>ce qui donne, en décomposant le <code>for</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">it = iter(x) <i class="conum" data-value="1"></i><b>(1)</b>
try:
  e = next(it) <i class="conum" data-value="2"></i><b>(2)</b>
  while True:
    ...
    e = next(it) <i class="conum" data-value="2"></i><b>(2)</b>
except StopIteration:
  pass</code></pre>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>iter(x)]</code> crée un nouvel objet&#8230;&#8203;</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>&#8230;&#8203; qui débite des valeurs lorsqu&#8217;on le sollicite avec la fonction <code>next()</code>.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>Comme précédement, le <code>for</code> n&#8217;est rien d&#8217;autre qu&#8217;un <code>while</code> infini duquel on sort par une exception.</p>
</div>
<div class="paragraph">
<p>L&#8217;objet créé par la fonction <code>iter()</code> s&#8217;appelle un <em>itérateur</em>.
On constate que cet itérateur est ensuite manipulé par la fonction <code>next()</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_itérateur"><a class="anchor" href="#_itérateur"></a>3. Itérateur</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Un itérateur égrène donc des valeurs :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">un_iterateur = iter("abc")  # itérateur sur une string
print(next(un_iterateur))   # -&gt; a
print(next(un_iterateur))   # -&gt; b
print(next(un_iterateur))   # -&gt; c
print(next(un_iterateur))   # -&gt; StopIteration</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou bien :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">un_iterateur = iter({True,3,(1,2)}) # itérateur sur un set
print(next(un_iterateur))   # -&gt; True
print(next(un_iterateur))   # -&gt; (1,2)
print(next(un_iterateur))   # -&gt; 3
print(next(un_iterateur))   # -&gt; StopIteration</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_itérateur_créé_sur_une_collection"><a class="anchor" href="#_itérateur_créé_sur_une_collection"></a>3.1. Itérateur créé sur une collection</h3>
<div class="paragraph">
<p>Un itérateur est souvent utilisé dans une itération pour accéder séquentiellement
aux éléments d&#8217;une collection sous-jacente.
Il est associé dès sa création à cette collection,
qu&#8217;il va parcourir séquentiellement et une seule fois.</p>
</div>
<div class="paragraph">
<p>Par analogie, on peut voir la collection comme une règle graduée,
et l&#8217;itérateur comme un curseur posé sur la règle,
se déplaçant de gauche à droite d&#8217;une position à la fois,
et donnant accès à la cote sur laquelle il est positionné.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/curseur.png" alt="curseur" width="300">
</div>
</div>
<div class="paragraph">
<p>L&#8217;itérateur détient l&#8217;élément courant de l&#8217;itération.
Donc un itérateur est relatif à une itération donnée sur une collection donnée.
On peut exploiter plusieurs itérateurs sur un même itérable en même temps.
Par exemple, lors de boucles imbriquées sur une même collection, on a autant d&#8217;itérateurs que de boucles.</p>
</div>
<div class="paragraph">
<p>Par exemple, le code ci-dessous qui sort les mots de 2 lettres prises parmi a,b,c,d  :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">s = "abcd"
for c1 in s:
    for c2 in s:
      print(f"{c1}{c2}",end=" ")</code></pre>
</div>
</div>
<div class="paragraph">
<p>n&#8217;est qu&#8217;une écriture compacte pour :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">s = "abcd"
for c1 in iter(s):
    for c2 in iter(s):
      print(f"{c1}{c2}",end=" ")</code></pre>
</div>
</div>
<div class="paragraph">
<p>qui révèle la présence de 2 itérateurs.
La décomposition du <code>for</code> donne :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">s = "abcd"
it1 = iter(s) <i class="conum" data-value="1"></i><b>(1)</b>
try:
  while True:
    c1 = next(it1)

    it2 = iter(s)   <i class="conum" data-value="2"></i><b>(2)</b>
    try:
      while True:
        c2 = next(it2)
        print(f"{c1}{c2}",end=" ")
    except StopIteration:
      pass
except StopIteration:
  pass</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>création d&#8217;un premier itérateur it1</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>création d&#8217;un second itérateur it2</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_iter_et_next"><a class="anchor" href="#_iter_et_next"></a>3.2. <code>iter()</code> et <code>next()</code></h3>
<div class="paragraph">
<p>Les fonctions <code>iter()</code> et <code>next()</code> appellent respectivement
les méthodes <code>__iter__()</code> et <code>__next__()</code> de l&#8217;objet passé en argument,
ce qui a le mérite d&#8217;allèger l&#8217;écriture qui sans cela serait :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">s = "abcd"
# boucle de niveau 1
it1 = s.__iter__()
try:
  while True:
    c1 = it1.__next__()
    # boucle de niveau 2
    it2 = s.__iter__()
    try:
      while True:
        c2 = it2.__next__()
        print(f"{c1}{c2}",end=" ")
    except StopIteration:
      pass
    # fin niveau 2
except StopIteration:
  pass
# fin niveau 1</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implémenter_un_itérateur"><a class="anchor" href="#_implémenter_un_itérateur"></a>3.3. Implémenter un itérateur</h3>
<div class="paragraph">
<p>Créer un itérateur revient à créer une classe possédant une méthode <code>__next__()</code> renvoyant l’élément courant (celui sur lequel l’itérateur est positionné),
puis se positionnant sur le suivant (parcours séquentiel).</p>
</div>
<div class="paragraph">
<p>Pour signaler la fin de l&#8217;itération, l&#8217;itérateur doit lancer une exception de type <code>StopIteration</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_fonctions_renvoyant_un_itérateur"><a class="anchor" href="#_fonctions_renvoyant_un_itérateur"></a>3.4. Fonctions renvoyant un itérateur</h3>
<div class="paragraph">
<p><code>range()</code> est une fonction de base (<em>builtin function</em>) :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">for i in range(5):
  print(i,end=" ")          # 0 1 2 3 4

print(list(range(10)))      # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
print(set(range(10)))       # {0, 1, 2, 3, 4, 5, 6, 7, 8, 9}</code></pre>
</div>
</div>
<div class="paragraph">
<p>qui renvoye un itérateur :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">import sys
print(sys.getsizeof(range(10)))          # 48
print(sys.getsizeof(range(10000)))       # 48

print(sys.getsizeof(list(range(10))))    # 136
print(sys.getsizeof(list(range(10000)))) # 80056</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il existe d&#8217;autres builtins fonctions renvoyant un itérateur,
comme par exemple :</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enumerate()</code></dt>
<dd>
<p>renvoie un itérateur qui égrène des tuples contenant un compteur de l’itération courante et l&#8217;élément courant de l’itérable passé en argument.</p>
</dd>
<dt class="hdlist1"><code>zip()</code></dt>
<dd>
<p>renvoie un itérateur qui égrène des tuples regroupant les éléments de chacun des itérables passés en argument.</p>
</dd>
<dt class="hdlist1"><code>filter()</code></dt>
<dd>
<p>renvoie un itérateur qui égrène les éléments de l’itérable passé en second argument vérifiant la condition exprimée par la fonction passée en premier argument.</p>
</dd>
<dt class="hdlist1"><code>map()</code></dt>
<dd>
<p>renvoie un itérateur qui égrène les valeurs calculées par la fonction passée en premier argument à partir des éléments de l’itérable passé en second argument.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_packing_et_unpacking"><a class="anchor" href="#_packing_et_unpacking"></a>4. Packing et unpacking</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Le packing/unpacking est l&#8217;empaquetage/dépaquetage d&#8217;un itérable.
Il permet, par exemple, en une instruction, d&#8217;affecter plusieurs variables en piochant dans un itérable :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">s = "abcd"
s1,s2,s3,s4 = s
print(f"{s1=},{s2=},{s3=},{s4=}")   # s1='a', s2='b', s3="c", s4="d"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il suffit juste que le nombre de variables à gauche soit adéquat, sinon :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">s1,s2,s3,s4,s5 = s     # ValueError: not enough values to unpack (expected 5, got 4)
s1,s2,s3 = s  # ValueError: too many values to unpack (expected 3)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela fonctionne à plusieurs niveaux d&#8217;imbrication :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">l1,l2,l3 = [1,("a","b","c"),None]
print(f"{l1=},{l2=},{l3=}")   # l1=1, l2=('a', 'b', 'c'), l3=None

l1,(l21,l22,l23),l3 = [1,("a","b","c"),None]
print(f"{l1=},{l21=},{l22=},{l23=},{l3=}")  # l1=1, l21='a', l22='b', l23='c', l3=None</code></pre>
</div>
</div>
<h3 id="_lopérateur_splat" class="discrete">L&#8217;opérateur <em>splat</em> <code>*</code></h3>
<div class="paragraph">
<p>L&#8217;opérateur <em>splat</em> <code>*</code>, utilisé devant une variable,
permet à celle-ci de capturer plusieurs éléments issus d&#8217;un dépaquetage :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">s = "abcd"
s1,s2,*s3 = s  # s1='a', s2='b', s3=['c','d']
s1,*s2 = s  # s1='a', s2=['b','c','d']
s1,*s2,s3 = s  # s1='a', s2=['b','c'], s3='d'

l1,(l21,*l22),*l3 = [1,("a","b","c"),None,"a"]
print(f"{l1=},{l21=},{l22=},{l3=}")  # l1=1, l21='a', l22=['b','c'], l3=[None,"a"]

*l1,l2 = [1,("a","b","c"),None,"a"]
print(f"{l1=},{l2=}")  # l1=[1, ('a', 'b', 'c'), None], l2='a'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Utilisé devant un itérable, il le dépaquette sur place :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">print(*[0, 1, 2], 3, *[4, 5, 6])  # 0 1 2 3 4 5 6</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut utiliser cela pour définir une fonction acceptant un nombre variable d&#8217;arguments :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">def f(*args):
  print(f"{len(args)=}, {args=}")

f(1,2,3)        # len(args)=3, args=(1, 2, 3)
f("abc", None)  # len(args)=2, args=('abc', None)</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est équivalent à :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">def f(args):
  print(f"{len(args)=}, {args=}")</code></pre>
</div>
</div>
<div class="paragraph">
<p>sauf que dans ce dernier cas, <code>f</code> ne peut recevoir qu&#8217;un unique argument,
ce qui oblige, si on veut lui en fournir plusieurs, de les empaqueter dans un tuple (ou une liste, ou un ensemble) :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">f((1,2,3))        # len(args)=3, args=(1, 2, 3)
f(("abc", None))  # len(args)=2, args=('abc', None)</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est moins élégant pour l&#8217;utilisateur  de la fonction.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p class="center">
  <span style="font-size: 0.9em;">
    <a href="https://jacquelincharbonnel.github.io/">Jacquelin Charbonnel</a>
    <!-- &nbsp; &mdash; &nbsp; -->
    &nbsp; &nbsp;
    &copy;Creative Commons BY-NC-SA 4.0
  </span>
  </p>
</footer>

<script>
var myDate = new Date(document.lastModified);
myNewDate = new Intl.DateTimeFormat(
            undefined,
            {year: "numeric", month: "long", day: "numeric", hour: "2-digit", minute: "2-digit"}
        )
        .format(myDate).replace(/\./g, '-');
document.getElementById("lastmodify").innerHTML = myNewDate ;
</script>

<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
